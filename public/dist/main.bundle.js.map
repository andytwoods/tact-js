{"version":3,"file":"main.bundle.js","sources":["webpack:///webpack/bootstrap 59f980b05553f46b052f","webpack:///./src/hapticPlayer.js","webpack:///./src/Tacsocket.js","webpack:///./src/main.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 59f980b05553f46b052f","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Tacsocket = require('./Tacsocket');\n\nvar _Tacsocket2 = _interopRequireDefault(_Tacsocket);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar hapticPlayer = function () {\n    function hapticPlayer() {\n        var _this = this;\n\n        _classCallCheck(this, hapticPlayer);\n\n        this.socket = new _Tacsocket2.default();\n        this.handlers = [];\n        this.message = {};\n\n        this.socket.on('change', function (message) {\n            _this.message = message;\n            _this._publish('change', _this.message);\n        });\n    }\n\n    _createClass(hapticPlayer, [{\n        key: '_publish',\n        value: function _publish(event, args) {\n            this.handlers.forEach(function (topic) {\n                if (topic.event === event) {\n                    topic.handler(args);\n                }\n            });\n        }\n    }, {\n        key: 'on',\n        value: function on(event, handler, context) {\n            if (typeof context === 'undefined') {\n                context = handler;\n            }\n            this.handlers.push({ event: event, handler: handler.bind(context) });\n\n            this._publish('change', this.message);\n        }\n    }, {\n        key: 'turnOff',\n        value: function turnOff(position) {\n            var request = {\n                Submit: [{\n                    Type: 'turnOff',\n                    Key: position\n                }]\n            };\n            this.socket.send(JSON.stringify(request));\n        }\n    }, {\n        key: 'turnOffAll',\n        value: function turnOffAll() {\n            var request = {\n                Submit: [{\n                    Type: 'turnOffAll'\n                }]\n            };\n            this.socket.send(JSON.stringify(request));\n        }\n    }, {\n        key: 'submitDot',\n        value: function submitDot(key, pos, dotPoints, durationMillis) {\n            var request = {\n                Submit: [{\n                    Type: 'frame',\n                    Key: key,\n                    Frame: {\n                        Position: pos,\n                        PathPoints: [],\n                        DotPoints: dotPoints,\n                        DurationMillis: durationMillis\n                    }\n                }]\n            };\n            this.socket.send(JSON.stringify(request, function (key, val) {\n                return val.toFixed ? Number(val.toFixed(3)) : val;\n            }));\n        }\n    }, {\n        key: 'submitPath',\n        value: function submitPath(key, pos, pathPoints, durationMillis) {\n            var request = {\n                Submit: [{\n                    Type: 'frame',\n                    Key: key,\n                    Frame: {\n                        Position: pos,\n                        PathPoints: pathPoints,\n                        DotPoints: [],\n                        DurationMillis: durationMillis\n                    }\n                }]\n            };\n            this.socket.send(JSON.stringify(request, function (key, val) {\n                return val.toFixed ? Number(val.toFixed(3)) : val;\n            }));\n        }\n    }]);\n\n    return hapticPlayer;\n}();\n\nexports.default = hapticPlayer;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/hapticPlayer.js\n// module id = 0\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar defaultURL = 'ws://localhost:15881/v2/feedbacks';\nvar status = {\n    connecting: 'Connecting',\n    connected: 'Connected',\n    disconnect: 'Disconnected'\n};\n\nvar Tacsocket = function () {\n    function Tacsocket() {\n        _classCallCheck(this, Tacsocket);\n\n        this.handlers = [];\n        this.message = {};\n        this.websocketClient;\n        this.currentStatus = status.disconnect;\n        this.connect();\n    }\n\n    _createClass(Tacsocket, [{\n        key: 'publish',\n        value: function publish(event, args) {\n            this.handlers.forEach(function (topic) {\n                if (topic.event === event) {\n                    topic.handler(args);\n                }\n            });\n        }\n    }, {\n        key: 'on',\n        value: function on(event, handler, context) {\n            if (typeof context === 'undefined') {\n                context = handler;\n            }\n            this.handlers.push({ event: event, handler: handler.bind(context) });\n\n            this.publish('change', {\n                status: this.currentStatus,\n                message: this.message\n            });\n        }\n    }, {\n        key: 'connect',\n        value: function connect() {\n            var _this = this;\n\n            try {\n                this.websocketClient = new WebSocket(defaultURL);\n            } catch (e) {\n                console.log(e);\n                return;\n            }\n\n            this.websocketClient.onopen = function () {\n                _this.currentStatus = status.connected;\n                _this.publish('change', {\n                    status: _this.currentStatus,\n                    message: _this.message\n                });\n            };\n\n            this.websocketClient.onmessage = function (result) {\n                if (JSON.stringify(_this.message) === result.data) {\n                    return;\n                }\n\n                _this.message = JSON.parse(result.data);\n                _this.publish('change', {\n                    status: _this.currentStatus,\n                    message: _this.message\n                });\n            };\n\n            this.websocketClient.onclose = function (event) {\n                _this.currentStatus = status.disconnect;\n                _this.publish('change', {\n                    status: _this.currentStatus,\n                    message: _this.message\n                });\n                setTimeout(function () {\n                    this.connect();\n                }, 5000);\n            };\n\n            this.currentStatus = status.connecting;\n            this.publish('change', {\n                status: this.currentStatus,\n                message: this.message\n            });\n        }\n    }, {\n        key: 'send',\n        value: function send(message) {\n            if (message === undefined) {\n                return;\n            }\n\n            if (this.websocketClient === undefined) {\n                return;\n            }\n\n            if (this.currentStatus !== status.connected) {\n                return;\n            }\n\n            try {\n                this.websocketClient.send(message);\n            } catch (e) {}\n        }\n    }]);\n\n    return Tacsocket;\n}();\n\nexports.default = Tacsocket;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Tacsocket.js\n// module id = 2\n// module chunks = 0","\"use strict\";\n\nvar _hapticPlayer = require(\"./hapticPlayer\");\n\nvar _hapticPlayer2 = _interopRequireDefault(_hapticPlayer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nwindow.hapticPlayer = _hapticPlayer2.default;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/main.js\n// module id = 3\n// module chunks = 0"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACnHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC3HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;A","sourceRoot":""}