{"version":3,"sources":["webpack:///webpack/bootstrap 18b5ddfe48a10c1f2222","webpack:///./src/EventEmitter.js","webpack:///./src/hapticPlayer.js","webpack:///./index.js","webpack:///./src/Tacsocket.js"],"names":["EventEmitter","event","listener","TypeError","events_","emit","push","listeners","args","Array","prototype","slice","call","arguments","i","length","apply","on","removeListener","handlerInternal","opt_event","isArray","indexOf","splice","hapticPlayer","socket","handlers","message","position","request","Submit","Type","Key","send","JSON","stringify","key","pos","dotPoints","durationMillis","Frame","Position","PathPoints","DotPoints","DurationMillis","val","toFixed","Number","pathPoints","window","defaultURL","STATUS","CONNECTING","CONNECTED","DISCONNECT","Tacsocket","retryConnectTime","websocketClient","DEFAULT_RETRY_CONNECT_TIME","currentStatus","connect","WebSocket","e","console","log","onopen","status","onmessage","result","data","parse","onclose","setTimeout","undefined"],"mappings":"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","file":"tact.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 18b5ddfe48a10c1f2222","export default class EventEmitter {\r\n    on(event, listener) {\r\n        if (typeof listener !== 'function') {\r\n            throw new TypeError('Listener must be a function');\r\n        }\r\n        if (!this.events_) {\r\n            this.events_ = {};\r\n        }\r\n\r\n        this.emit('newListener', event, listener);\r\n\r\n        if (!this.events_[event]) {\r\n            this.events_[event] = [];\r\n        }\r\n\r\n        this.events_[event].push(listener);\r\n\r\n        return this;\r\n    }\r\n\r\n    listeners(event) {\r\n        return this.events_ && this.events_[event];\r\n    }\r\n\r\n    emit(event) {\r\n        var listeners = this.listeners(event);\r\n        if (listeners) {\r\n            var args = Array.prototype.slice.call(arguments, 1);\r\n            for (var i = 0; i < listeners.length; i++) {\r\n                if (listeners[i]) {\r\n                    listeners[i].apply(this, args);\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    once(event, listener) {\r\n        this.on(event,  handlerInternal => {\r\n            this.removeListener(event, handlerInternal);\r\n            listener.apply(this, arguments);\r\n        });\r\n    }\r\n\r\n    removeAllListeners(opt_event) {\r\n        if (!this.events_) {\r\n            return this;\r\n        }\r\n        if (opt_event) {\r\n            delete this.events_[opt_event];\r\n        } else {\r\n            delete this.events_;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    removeListener(event, listener) {\r\n        if (typeof listener !== 'function') {\r\n            throw new TypeError('Listener must be a function');\r\n        }\r\n        if (!this.events_) {\r\n            return this;\r\n        }\r\n\r\n        var listeners = this.listeners(event);\r\n        if (Array.isArray(listeners)) {\r\n            var i = listeners.indexOf(listener);\r\n            if (i < 0) {\r\n                return this;\r\n            }\r\n            listeners.splice(i, 1);\r\n        }\r\n\r\n        return this;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/EventEmitter.js","import Tacsocket from './Tacsocket';\r\nimport EventEmitter from './EventEmitter';\r\n\r\nexport default class hapticPlayer extends EventEmitter{\r\n    constructor() {\r\n        super();\r\n        this.socket = new Tacsocket();\r\n        this.handlers = [];\r\n        this.message = {};\r\n\r\n        this.socket.on('change', (message) => {\r\n            this.message = message;\r\n            this.emit('change', this.message);\r\n        });\r\n    }\r\n\r\n    turnOff(position) {\r\n        var request = {\r\n            Submit :[ {\r\n                Type : 'turnOff',\r\n                Key : position\r\n            }]\r\n        };\r\n        this.socket.send(JSON.stringify(request));\r\n    };\r\n\r\n    turnOffAll() {\r\n        var request = {\r\n            Submit :[ {\r\n                Type : 'turnOffAll'\r\n            }]\r\n        };\r\n        this.socket.send(JSON.stringify(request));\r\n    };\r\n\r\n    submitDot (key, pos, dotPoints, durationMillis) {\r\n        var request = {\r\n            Submit :[ {\r\n                Type : 'frame',\r\n                Key : key,\r\n                Frame : {\r\n                    Position : pos,\r\n                    PathPoints: [],\r\n                    DotPoints : dotPoints,\r\n                    DurationMillis : durationMillis\r\n                }\r\n            }]\r\n        };\r\n        this.socket.send(JSON.stringify(request, function(key, val) {\r\n            return val.toFixed ? Number(val.toFixed(3)) : val;\r\n        }));\r\n    };\r\n\r\n    submitPath(key, pos, pathPoints, durationMillis) {\r\n        var request = {\r\n            Submit :[ {\r\n                Type : 'frame',\r\n                Key : key,\r\n                Frame : {\r\n                    Position : pos,\r\n                    PathPoints : pathPoints,\r\n                    DotPoints : [],\r\n                    DurationMillis : durationMillis\r\n                }\r\n            }]\r\n        };\r\n        this.socket.send(JSON.stringify(request, (key, val) => {\r\n            return val.toFixed ? Number(val.toFixed(3)) : val;\r\n        }));\r\n    };\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/hapticPlayer.js","import hapticPlayer from \"./src/hapticPlayer\";\r\n\r\nexport default hapticPlayer;\r\nwindow.hapticPlayer = hapticPlayer;\r\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","import EventEmitter from \"./EventEmitter\";\r\n\r\nlet defaultURL= 'ws://127.0.0.1:15881/v2/feedbacks';\r\n\r\nconst STATUS = {\r\n    CONNECTING : 'Connecting',\r\n    CONNECTED : 'Connected',\r\n    DISCONNECT : 'Disconnected'\r\n};\r\n\r\n\r\nexport default class Tacsocket extends EventEmitter{\r\n    constructor(retryConnectTime) {\r\n        super();\r\n        this.handlers = [];\r\n        this.message = {};\r\n        this.websocketClient;\r\n        this.DEFAULT_RETRY_CONNECT_TIME = 5000;\r\n        this.retryConnectTime = retryConnectTime || this.DEFAULT_RETRY_CONNECT_TIME;\r\n        this.currentStatus = STATUS.DISCONNECT;\r\n        this.connect();\r\n    }\r\n\r\n    connect() {\r\n        try  {\r\n            this.websocketClient = new WebSocket(defaultURL);\r\n        } catch (e) {\r\n            console.log(e);\r\n            return;\r\n        }\r\n\r\n        this.websocketClient.onopen = () => {\r\n            this.currentStatus = STATUS.CONNECTED;\r\n            this.emit('change', {\r\n                status: this.currentStatus,\r\n                message: this.message\r\n            });\r\n        };\r\n\r\n        this.websocketClient.onmessage = (result) => {\r\n            if (JSON.stringify(this.message) === result.data) {\r\n                return;\r\n            }\r\n\r\n            this.message = JSON.parse(result.data);\r\n            this.emit('change', {\r\n                status: this.currentStatus,\r\n                message: this.message\r\n            });\r\n        };\r\n\r\n        this.websocketClient.onclose = (event) => {\r\n            this.currentStatus = STATUS.DISCONNECT;\r\n            this.emit('change', {\r\n                status: this.currentStatus,\r\n                message: this.message\r\n            });\r\n            setTimeout(() => {\r\n                this.connect();\r\n            }, this.retryConnectTime);\r\n        };\r\n\r\n        this.currentStatus = STATUS.CONNECTING;\r\n        this.emit('change', {\r\n            status: this.currentStatus,\r\n            message: this.message\r\n        });\r\n    };\r\n\r\n    send(message) {\r\n        if (message === undefined) {\r\n            return;\r\n        }\r\n\r\n        if (this.websocketClient === undefined) {\r\n            return;\r\n        }\r\n\r\n        if (this.currentStatus !== STATUS.CONNECTED) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            this.websocketClient.send(message);\r\n        } catch (e) {\r\n        }\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Tacsocket.js"],"sourceRoot":""}