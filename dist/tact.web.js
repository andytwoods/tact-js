!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("hapticPlayer",[],t):"object"==typeof exports?exports.hapticPlayer=t():e.hapticPlayer=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),c=r(a),f=n(2),l=r(f),p=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.socket=new c.default,e.message={},e.socket.on("change",function(t){e.message=t,e.emit("change",e.message)}),e}return s(t,e),u(t,[{key:"turnOff",value:function(e){var t={Submit:[{Type:"turnOff",Key:e}]};this.socket.send(JSON.stringify(t))}},{key:"turnOffAll",value:function(){var e={Submit:[{Type:"turnOffAll"}]};this.socket.send(JSON.stringify(e))}},{key:"submitDot",value:function(e,t,n,r){var o={Submit:[{Type:"frame",Key:e,Frame:{Position:t,PathPoints:[],DotPoints:n,DurationMillis:r}}]};this.socket.send(JSON.stringify(o,function(e,t){return t.toFixed?Number(t.toFixed(3)):t}))}},{key:"submitPath",value:function(e,t,n,r){var o={Submit:[{Type:"frame",Key:e,Frame:{Position:t,PathPoints:n,DotPoints:[],DurationMillis:r}}]};this.socket.send(JSON.stringify(o,function(e,t){return t.toFixed?Number(t.toFixed(3)):t}))}}]),t}(l.default);t.default=p,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),c=r(a),f="ws://127.0.0.1:15881/v2/feedbacks",l={CONNECTING:"Connecting",CONNECTED:"Connected",DISCONNECT:"Disconnected"},p=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handlers=[],n.message={},n.DEFAULT_RETRY_CONNECT_TIME=5e3,n.retryConnectTime=e||n.DEFAULT_RETRY_CONNECT_TIME,n.currentStatus=l.DISCONNECT,n.connect(),n}return s(t,e),u(t,[{key:"connect",value:function(){var e=this;try{this.websocketClient=new WebSocket(f)}catch(e){return}this.websocketClient.onopen=function(){e.currentStatus=l.CONNECTED,e.emit("change",{status:e.currentStatus,message:e.message})},this.websocketClient.onmessage=function(t){JSON.stringify(e.message)!==t.data&&(e.message=JSON.parse(t.data),e.emit("change",{status:e.currentStatus,message:e.message}))},this.websocketClient.onclose=function(t){e.currentStatus=l.DISCONNECT,e.emit("change",{status:e.currentStatus,message:e.message}),setTimeout(function(){e.connect()},e.retryConnectTime)},this.currentStatus=l.CONNECTING,this.emit("change",{status:this.currentStatus,message:this.message})}},{key:"send",value:function(e){if(void 0!==e&&void 0!==this.websocketClient&&this.currentStatus===l.CONNECTED)try{this.websocketClient.send(e)}catch(e){}}}]),t}(c.default);t.default=p,e.exports=t.default},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e)}return r(e,[{key:"on",value:function(e,t){if("function"!=typeof t)throw new TypeError("Listener must be a function");return this.events_||(this.events_={}),this.emit("newListener",e,t),this.events_[e]||(this.events_[e]=[]),this.events_[e].push(t),this}},{key:"listeners",value:function(e){return this.events_&&this.events_[e]}},{key:"emit",value:function(e){var t=this.listeners(e);if(t){for(var n=Array.prototype.slice.call(arguments,1),r=0;r<t.length;r++)t[r]&&t[r].apply(this,n);return!0}return!1}},{key:"once",value:function(e,t){var n=this,r=arguments;this.on(e,function(o){n.removeListener(e,o),t.apply(n,r)})}},{key:"removeAllListeners",value:function(e){return this.events_?(e?delete this.events_[e]:delete this.events_,this):this}},{key:"removeListener",value:function(e,t){if("function"!=typeof t)throw new TypeError("Listener must be a function");if(!this.events_)return this;var n=this.listeners(e);if(Array.isArray(n)){var r=n.indexOf(t);if(r<0)return this;n.splice(r,1)}return this}}]),e}();t.default=o,e.exports=t.default}])});